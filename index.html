<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lerne SQL-Befehle interaktiv</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f3f4f6;
            font-family: Arial, sans-serif;
        }
        textarea {
            width: 100%;
            min-height: 100px;
            border: 2px solid #ddd;
            padding: 8px;
            border-radius: 8px;
        }
        .task-container {
            display: none;
        }
    </style>
</head>
<body>
    <div class="p-8 bg-gray-100 min-h-screen">
        <h1 class="text-4xl font-extrabold mb-6 text-blue-700">Lerne SQL-Befehle interaktiv</h1>
        
        <!-- Index Section -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">Index der SQL-Befehle</h2>
            <ul id="command-list" class="list-disc pl-6">
                <!-- Hier kommen die SQL-Befehle dynamisch hin -->
            </ul>
        </div>

        <div id="command-details" class="hidden mt-10 p-8 bg-white rounded-xl shadow-2xl">
            <!-- Detailansicht des Befehls -->
        </div>

        <div id="task-container" class="task-container mt-8 p-6 bg-yellow-100 rounded-md shadow-md">
            <h3 class="text-xl font-semibold mb-4">Aufgabe:</h3>
            <p id="task-text" class="text-gray-800"></p>
            <textarea id="sql-input" placeholder="Deine SQL-Abfrage hier eingeben..."></textarea>
            <button class="mt-4 bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600" onclick="checkSQLInput()">Prüfen</button>
            <p id="feedback" class="mt-4 text-gray-800"></p>
        </div>
    </div>

    <script>
        // SQL-Befehle und ihre Details
        const sqlCommands = [
            {
                command: "SELECT",
                description: "Wählt Daten aus einer Tabelle aus.",
                example: "SELECT * FROM kunden WHERE plz = '12345';",
                task: "Erstelle eine Abfrage, die alle Kunden mit einer Postleitzahl größer als '50000' ausgibt.",
                solution: /SELECT \* FROM kunden WHERE plz > '50000';/i
            },
            {
                command: "FROM",
                description: "Gibt die Tabelle an, aus der Daten abgefragt werden.",
                example: "SELECT name FROM kunden;",
                task: "Zeige alle Kunden aus der Tabelle 'kunden'.",
                solution: /SELECT \* FROM kunden;/i
            },
            {
                command: "WHERE",
                description: "Filtert Datensätze basierend auf einer Bedingung.",
                example: "SELECT * FROM kunden WHERE plz = '12345';",
                task: "Finde alle Kunden mit der Postleitzahl '12345'.",
                solution: /SELECT \* FROM kunden WHERE plz = '12345';/i
            },
            {
                command: "INSERT INTO",
                description: "Fügt neue Datensätze in eine Tabelle ein.",
                example: "INSERT INTO kunden (name, plz) VALUES ('Max Mustermann', '12345');",
                task: "Füge einen neuen Kunden mit dem Namen 'John Doe' und der Postleitzahl '54321' in die Tabelle 'kunden' ein.",
                solution: /INSERT INTO kunden \(name, plz\) VALUES \('John Doe', '54321'\);/i
            },
            {
                command: "UPDATE",
                description: "Aktualisiert bestehende Datensätze.",
                example: "UPDATE kunden SET plz = '54321' WHERE name = 'Max Mustermann';",
                task: "Ändere die Postleitzahl des Kunden 'Max Mustermann' auf '98765'.",
                solution: /UPDATE kunden SET plz = '98765' WHERE name = 'Max Mustermann';/i
            },
            {
                command: "DELETE",
                description: "Löscht Datensätze aus einer Tabelle.",
                example: "DELETE FROM kunden WHERE name = 'Max Mustermann';",
                task: "Lösche den Kunden 'Max Mustermann' aus der Tabelle 'kunden'.",
                solution: /DELETE FROM kunden WHERE name = 'Max Mustermann';/i
            },
            {
                command: "JOIN",
                description: "Verbindet zwei oder mehr Tabellen basierend auf einer gemeinsamen Spalte.",
                example: "SELECT kunden.name, bestellungen.bestellt_am FROM kunden JOIN bestellungen ON kunden.id = bestellungen.kunden_id;",
                task: "Zeige alle Bestellungen von Kunden an, indem du die Tabellen 'kunden' und 'bestellungen' verbindest.",
                solution: /SELECT kunden\.name, bestellungen\.bestellt_am FROM kunden JOIN bestellungen ON kunden\.id = bestellungen\.kunden_id;/i
            },
            {
                command: "GROUP BY",
                description: "Gruppiert Datensätze basierend auf einer bestimmten Spalte.",
                example: "SELECT plz, COUNT(*) FROM kunden GROUP BY plz;",
                task: "Zeige die Anzahl der Kunden pro Postleitzahl.",
                solution: /SELECT plz, COUNT\(\*\) FROM kunden GROUP BY plz;/i
            },
            {
                command: "ORDER BY",
                description: "Sortiert die Ergebnisse einer Abfrage.",
                example: "SELECT name FROM kunden ORDER BY name DESC;",
                task: "Zeige alle Kunden in alphabetischer Reihenfolge an.",
                solution: /SELECT name FROM kunden ORDER BY name ASC;/i
            },
            {
                command: "LIMIT",
                description: "Begrenzt die Anzahl der zurückgegebenen Datensätze.",
                example: "SELECT * FROM kunden LIMIT 5;",
                task: "Zeige nur die ersten 3 Kunden an.",
                solution: /SELECT \* FROM kunden LIMIT 3;/i
            }
        ];

        // Anzeige der SQL-Befehle
        const commandList = document.getElementById("command-list");

        sqlCommands.forEach(command => {
            const li = document.createElement("li");
            const link = document.createElement("a");
            link.href = `#${command.command.toLowerCase()}`;
            link.classList.add("text-indigo-600");
            link.textContent = command.command;

            link.addEventListener("click", () => showCommandDetails(command));

            li.appendChild(link);
            commandList.appendChild(li);
        });

        // Zeige die Details des ausgewählten Befehls
        function showCommandDetails(command) {
            const commandDetails = document.getElementById("command-details");
            const taskContainer = document.getElementById("task-container");
            const taskText = document.getElementById("task-text");

            commandDetails.classList.remove("hidden");
            taskContainer.classList.remove("task-container");

            commandDetails.innerHTML = `
                <h2 class="text-3xl font-bold text-indigo-700">${command.command}</h2>
                <p class="mt-4 text-gray-700">${command.description}</p>
                <h3 class="text-xl font-semibold mt-6">Beispiel:</h3>
                <pre class="bg-gray-100 p-4 rounded-md mt-4 border-l-4 border-indigo-600 text-sm text-gray-800">${command.example}</pre>
            `;

            taskText.textContent = command.task;
            taskText.dataset.solution = command.solution;
        }

        // Prüfe die Eingabe des Nutzers
        function checkSQLInput() {
            const userQuery = document.getElementById("sql-input").value.trim();
            const solution = document.getElementById("task-text").dataset.solution;
            const feedback = document.getElementById("feedback");

            const correctSolution = new RegExp(solution);

            if (correctSolution.test(userQuery)) {
                feedback.textContent = "Richtig! Deine SQL-Abfrage ist korrekt.";
                feedback.style.color = "green";
            } else {
                feedback.textContent = "Falsch. Bitte versuche es erneut.";
                feedback.style.color = "red";
            }
        }
    </script>
</body>
</html>
